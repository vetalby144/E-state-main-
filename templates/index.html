<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>E-state ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
</head>

<body>

<!-- HEADER -->
<header class="header">
    <div class="container header-content">
        <h1 class="logo">E<span>state</span></h1>

        <nav class="nav">
            <a href="#categories">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</a>
            <a href="#listings">–û–≥–æ–ª–æ—à–µ–Ω–Ω—è</a>
            <a href="#filters">–§—ñ–ª—å—Ç—Ä–∏</a>
        </nav>

        <div class="auth-buttons">
            {% if session.get('user_id') %}
                <a href="{{ url_for('user_home') }}" class="btn-login">–ü—Ä–æ—Ñ—ñ–ª—å</a>
                <a href="{{ url_for('logout') }}" class="btn-register">–í–∏–π—Ç–∏</a>
            {% else %}
                <a href="{{ url_for('login') }}" class="btn-login">–£–≤—ñ–π—Ç–∏</a>
                <a href="{{ url_for('register') }}" class="btn-register">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>
            {% endif %}
        </div>
    </div>
</header>


<!-- HERO -->
<section class="hero">
    <div class="hero-overlay">
        <div class="container hero-content">
            <h2>–ó–Ω–∞–π–¥—ñ—Ç—å —ñ–¥–µ–∞–ª—å–Ω–µ –∂–∏—Ç–ª–æ –≤ –£–∫—Ä–∞—ó–Ω—ñ</h2>
            <p>–û—Ä–µ–Ω–¥–∞, –ø—Ä–æ–¥–∞–∂, –Ω–æ–≤–æ–±—É–¥–æ–≤–∏, –∫–æ–º–µ—Ä—Ü—ñ–π–Ω–∞ –Ω–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å ‚Äî –≤—Å–µ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ</p>

            <!-- –ü–û–®–£–ö –¢–ï–ü–ï–† –¢–ê–ö–û–ñ –í–ï–î–ï –î–û #listings -->
            <form class="search-box" action="/#listings" method="GET">
                <input type="text" name="search" placeholder="–ü–æ—à—É–∫ –ø–æ –º—ñ—Å—Ç—É, —Ä–∞–π–æ–Ω—É, —Ç–∏–ø—É..." value="{{ request.args.get('search', '') }}">
                <button type="submit">–ü–æ—à—É–∫</button>
            </form>
        </div>
    </div>
</section>


<!-- –ö–ê–¢–ï–ì–û–†–Ü–á -->
<section id="categories" class="container categories">
    <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>

    <div class="categories-grid">
        <a href="/?type=flat#listings" class="category-card">
            <div class="icon">üè¢</div>
            <span>–ö–≤–∞—Ä—Ç–∏—Ä–∏</span>
        </a>

        <a href="/?type=house#listings" class="category-card">
            <div class="icon">üè†</div>
            <span>–ë—É–¥–∏–Ω–∫–∏</span>
        </a>

        <a href="/?type=commercial#listings" class="category-card">
            <div class="icon">üíº</div>
            <span>–ö–æ–º–µ—Ä—Ü—ñ—è</span>
        </a>

        <a href="/?type=land#listings" class="category-card">
            <div class="icon">üå≥</div>
            <span>–î—ñ–ª—è–Ω–∫–∏</span>
        </a>

        <a href="/?type=new#listings" class="category-card">
            <div class="icon">üèó</div>
            <span>–ù–æ–≤–æ–±—É–¥–æ–≤–∏</span>
        </a>
    </div>
</section>


<!-- –§–Ü–õ–¨–¢–†–ò -->
<section id="filters" class="container filters-box">
    <h2 class="section-title">–§—ñ–ª—å—Ç—Ä–∏ –ø–æ—à—É–∫—É</h2>

    <!-- –§–û–†–ú–ê –¢–ï–ü–ï–† –í–ï–î–ï –î–û #listings -->
    <form method="GET" action="/#listings" class="filters-grid">

        <!-- CITY -->
        <select name="city">
            <option value="">–ú—ñ—Å—Ç–æ</option>

            <option value="–ö–∏—ó–≤">–ö–∏—ó–≤</option>
            <option value="–õ—å–≤—ñ–≤">–õ—å–≤—ñ–≤</option>
            <option value="–û–¥–µ—Å–∞">–û–¥–µ—Å–∞</option>
            <option value="–•–∞—Ä–∫—ñ–≤">–•–∞—Ä–∫—ñ–≤</option>
        </select>


        <!-- TYPE -->
        <select name="type">
            <option value="">–¢–∏–ø –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ</option>

            <option value="flat">–ö–≤–∞—Ä—Ç–∏—Ä–∞</option>
            <option value="house">–ë—É–¥–∏–Ω–æ–∫</option>
            <option value="commercial">–ö–æ–º–µ—Ä—Ü—ñ—è</option>
            <option value="land">–î—ñ–ª—è–Ω–∫–∞</option>
            <option value="new">–ù–æ–≤–æ–±—É–¥–æ–≤–∞</option>
        </select>


        <!-- PRICE -->
        <input type="number" placeholder="–ú—ñ–Ω. —Ü—ñ–Ω–∞" name="min_price" value="{{ request.args.get('min_price', '') }}">
        <input type="number" placeholder="–ú–∞–∫—Å. —Ü—ñ–Ω–∞" name="max_price" value="{{ request.args.get('max_price', '') }}">

        <button class="filter-btn" type="submit">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
    </form>
</section>


<!-- –û–ì–û–õ–û–®–ï–ù–ù–Ø -->
<section id="listings" class="container listings">
    <h2 class="section-title">–û–≥–æ–ª–æ—à–µ–Ω–Ω—è</h2>

    <div class="cards-grid">

        {% for p in properties %}
        <div class="estate-card">
            <div class="estate-img" style="background-image:url('{{ p.image_url }}');"></div>

            <div class="estate-info">
                <h3>{{ p.title }}</h3>
                <p class="location">{{ p.city }}</p>
                <p class="price">{{ p.price }} ‚Ç¥</p>

                <a href="/property/{{ p.id }}" class="details-btn">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</a>
            </div>
        </div>
        {% endfor %}

        {% if properties|length == 0 %}
            <p class="no-results">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
        {% endif %}

    </div>


    <!-- –ü–ê–ì–Ü–ù–ê–¶–Ü–Ø -->
    {% if pagination.pages > 1 %}
    <div style="text-align:center; margin-top:30px;">

        {% if pagination.has_prev %}
        <a class="details-btn"
           href="{{ url_for('index',
                page=pagination.prev_num,
                search=request.args.get('search'),
                city=request.args.get('city'),
                type=request.args.get('type'),
                min_price=request.args.get('min_price'),
                max_price=request.args.get('max_price')
           ) }}#listings">‚Üê –ù–∞–∑–∞–¥</a>
        {% endif %}

        {% for page_num in pagination.iter_pages() %}
            {% if page_num %}
                {% if page_num == pagination.page %}
                    <strong style="margin:0 6px; font-size:18px; color:#002b5b;">{{ page_num }}</strong>
                {% else %}
                    <a href="{{ url_for('index',
                        page=page_num,
                        search=request.args.get('search'),
                        city=request.args.get('city'),
                        type=request.args.get('type'),
                        min_price=request.args.get('min_price'),
                        max_price=request.args.get('max_price')
                    ) }}#listings"
                    style="margin:0 6px; color:#004b8d; font-weight:bold; text-decoration:none;">
                        {{ page_num }}
                    </a>
                {% endif %}
            {% else %}
                ...
            {% endif %}
        {% endfor %}

        {% if pagination.has_next %}
        <a class="details-btn"
           href="{{ url_for('index',
                page=pagination.next_num,
                search=request.args.get('search'),
                city=request.args.get('city'),
                type=request.args.get('type'),
                min_price=request.args.get('min_price'),
                max_price=request.args.get('max_price')
           ) }}#listings">–í–ø–µ—Ä–µ–¥ ‚Üí</a>
        {% endif %}
    </div>
    {% endif %}

</section>


<footer class="footer">
    <p>¬© 2025 E-state ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ. –£—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
</footer>

</body>
</html>
